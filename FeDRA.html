<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DISASTER REPORTING & EMERGENCY DISPATCH</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            font-family: 'Times New Roman', Times, serif;
            font-style: normal;
        }
        body {
            background-color: #000000;
            color: #333;
            line-height: 1.6;
        }
        header {
            background-color: #ffffff;
            color: rgb(0, 0, 0);
            text-align: center;
            font-size: larger;
            padding: 1rem 0;
            margin-bottom: 2rem;
        }
        .header-content {
            display: flex;
            align-items: center;
            gap: 35px;
        }
        .logo {
            height: 120px;
            width: auto;
            max-width: 1550px;
            margin-left: 1rem;            
        }
        .container {
            display: flex;
            flex-wrap: wrap;
            gap: 2rem;
            padding: 0 2rem;
            max-width: 1200px;
            margin: 0 auto;
            position: relative;
        }
        .report-section {
            flex: 1;
            min-width: 200px;
            background: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
            font-family: Verdana, Geneva, Tahoma, sans-serif;
            text-align: left;
        }
        #map {
            flex: 2;
            min-width: 300px;
            height: 600px;
            background: #ddd;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        form {
            display: flex;
            flex-direction: column;
            gap: 1rem;
        }
        label {
            font-weight: bold;
            margin-top: 0.5rem;
        }
        input, select, textarea {
            padding: 0.75rem;
            border: 1px solid #ddd;
            border-radius: 4px;
            font-size: 1rem;
        }
        textarea {
            min-height: 100px;
            resize: vertical;
        }
        button {
            background-color: #000000;
            color: white;
            border: none;
            padding: 1rem;
            font-size: 1rem;
            border-radius: 4px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #02a117;
        }
        .coordinates {
            font-size: 0.8rem;
            color: #000000;
            margin-top: 0.2rem;
        }    
        /* Floating Response Notification */
        .response-notification {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80%;
            max-width: 500px;
            background: rgb(255, 255, 255);
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
            z-index: 1000;
            animation: fadeIn 0.3s ease-out;
            display: none;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translate(-50%, -40%); }
            to { opacity: 1; transform: translate(-50%, -50%); }
        }
        .response-notification h3 {
            color: #ff1900;
            margin-bottom: 1rem;
        }
        .response-notification ul {
            margin: 1rem 0;
            padding-left: 1.5rem;
        }
        .countdown {
            position: absolute;
            bottom: 10px;
            right: 10px;
            font-size: 0.9rem;
            color: #000000;
            font-style: italic;
        }
        .close-notification {
            position: absolute;
            top: 10px;
            right: 10px;
            background: none;
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            color: #000000;
        }      
        /* Pulse animation for last 3 seconds */
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); color: #e74c3c; }
            100% { transform: scale(1); }
        }
        .urgent {
            animation: pulse 0.5s infinite;
            font-weight: bold;
        }
        @media (max-width: 768px) {
            .container {
                flex-direction: column;
            }
            #map {
                height: 300px;
            }
            .response-notification {
                width: 90%;
            }
        }
    </style>
</head>
<body>
    <header>
        <div class="header-content">
        <img src="FeDRA(1).png" 
            alt="Federal Disaster Response Agency Logo" 
            class="logo">
            <h1>üö® DISASTER REPORTING & EMERGENCY DISPATCH</h1>
        </div>
    </header>

    <div class="container">
        <!-- Form to Report a Disaster -->
        <div class="report-section">
            <h2>Report a Disaster</h2>
            <form id="reportForm">
                <label for="disasterType">Type of Disaster:</label>
                <select id="disasterType" required>
                    <option value="">-- Select --</option>
                    <optgroup label="Natural Disasters">
                        <option value="Earthquake">üåç Earthquake</option>
                        <option value="Flood">üåä Flood</option>
                        <option value="Wildfire">üî• Wildfire</option>
                        <option value="Hurricane">üåÄ Hurricane</option>
                        <option value="Tornado">üå™Ô∏è Tornado</option>
                    </optgroup>
                    <optgroup label="Human-Made Disasters">
                        <option value="Industrial_Accident">üè≠ Industrial Accident</option>
                        <option value="Transport_Accident">üöÇ Transport Accident</option>
                        <option value="Terrorism">üí£ Terrorism</option>
                    </optgroup>
                    <optgroup label="Health Emergencies">
                        <option value="Disease_Outbreak">ü¶† Disease Outbreak</option>
                    </optgroup>
                    <option value="Other">‚ö†Ô∏è Other</option>
                </select>

                <label for="location">Location:</label>
                <input type="text" id="location" placeholder="Click on the map to select location" required readonly>
                <div id="coordinates" class="coordinates">Lat/Lng: Not selected</div>

                <label for="description">Description: (50 words)</label>
                <textarea id="description" placeholder="Describe the situation" required></textarea>

                <button type="submit">Report Disaster</button>
            </form>
        </div>

        <!-- Google Map Display -->
        <div id="map"></div>
        
        <!-- Floating Response Notification -->
        <div id="responseNotification" class="response-notification">
        <button class="close-notification">&times;</button>
        <div id="responseContent"></div>
        <div id="countdown" class="countdown"></div>
    </div>

    <script>
        // Emergency teams for each disaster type
        const emergencyTeams = {
            Earthquake: {
                teams: ["Urban Search & Rescue", "Medical Teams", "Structural Engineers", "Heavy Equipment"],
                eta: "15-30 minutes"
            },
            Flood: {
                teams: ["Water Rescue Squad", "Medical Boats", "Sandbagging Crews", "Power Restoration"],
                eta: "20-45 minutes"
            },
            Wildfire: {
                teams: ["Firefighters", "Helicopters", "Evacuation Teams", "Air Tankers"],
                eta: "10-25 minutes"
            },
            Hurricane: {
                teams: ["National Guard", "Evacuation Teams", "Power Restoration", "Debris Clearance"],
                eta: "30-60 minutes"
            },
            Tornado: {
                teams: ["Search & Rescue", "Medical Teams", "Structural Engineers"],
                eta: "20-45 minutes"
            },
            Industrial_Accident: {
                teams: ["Hazmat Team", "Firefighters", "Medical Teams"],
                eta: "15-30 minutes"
            },
            Transport_Accident: {
                teams: ["Jaws of Life Team", "Ambulances", "Police"],
                eta: "10-25 minutes"
            },
            Terrorism: {
                teams: ["SWAT Team", "Bomb Squad", "FBI Crisis Response"],
                eta: "Immediate (High Alert)"
            },
            Disease_Outbreak: {
                teams: ["Epidemiologists", "Mobile Hospitals", "Medical Teams"],
                eta: "1-2 hours"
            },
            Other: {
                teams: ["Police", "Ambulance", "Fire Department"],
                eta: "Varies"
            }
        };

        let map;
        let geocoder;
        let marker = null;
        let notificationTimeout;

        // Initialize map
        function initMap() {
            map = new google.maps.Map(document.getElementById("map"), {
                zoom: 2,
                center: { lat: 0, lng: 0 },
            });

            geocoder = new google.maps.Geocoder();

            // Geolocation
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (position) => {
                        const userLocation = {
                            lat: position.coords.latitude,
                            lng: position.coords.longitude,
                        };
                        map.setCenter(userLocation);
                        map.setZoom(12);
                        // Add temporary marker for user's location
                        new google.maps.Marker({
                            position: userLocation,
                            map: map,
                            title: "Your Current Location",
                            icon: {
                                url: "http://maps.google.com/mapfiles/ms/icons/red-dot.png"
                            }
                        });
                    },
                    () => {
                        alert("Geolocation failed. Defaulting to map view.");
                    }
                );
            }

            // Click to set location (with place name and coordinates)
            map.addListener("click", (event) => {
                // Remove previous marker if exists
                if (marker) {
                    marker.setMap(null);
                }
                
                // Add new red marker
                marker = new google.maps.Marker({
                    position: event.latLng,
                    map: map,
                    title: "Selected Disaster Location",
                    icon: {
                        url: "http://maps.google.com/mapfiles/ms/icons/green-dot.png"
                    }
                });
                
                // Show coordinates immediately
                document.getElementById("coordinates").textContent = 
                    `Lat: ${event.latLng.lat().toFixed(6)}, Lng: ${event.latLng.lng().toFixed(6)}`;
                
                // Geocode for address
                geocodeLatLng(event.latLng);
            });
        }

        // Convert Lat/Lng to Place Name
        function geocodeLatLng(latLng) {
            geocoder.geocode({ location: latLng }, (results, status) => {
                if (status === "OK") {
                    if (results[0]) {
                        document.getElementById("location").value = results[0].formatted_address;
                    } else {
                        document.getElementById("location").value = "Unknown location";
                    }
                } else {
                    document.getElementById("location").value = "Error: Could not determine address";
                }
            });
        }

        // Audio elements for sound effects
        const createAudio = () => {
            const audio = new Audio();
            audio.src = "data:audio/wav;base64,UklGRl9vT19XQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YU...";
            return audio;
        };
        
        const tickSound = createAudio();
        const alertSound = createAudio();
        
        // Show notification

        function showNotification(content) {
            const notification = document.getElementById("responseNotification");
            const contentDiv = document.getElementById("responseContent");
            const countdownDiv = document.getElementById("countdown");
            
            contentDiv.innerHTML = content;
            notification.style.display = "block";
            
            // Clear any existing timeout
            if (notificationTimeout) {
                clearTimeout(notificationTimeout);
            }
            
            // Start countdown from 10
            let seconds = 10;
            updateCountdown();
            
            function updateCountdown() {
                // Update display
                countdownDiv.textContent = `Closing in ${seconds}...`;
                
                // Visual effects
                if (seconds <= 3) {
                    countdownDiv.classList.add("urgent");
                    if (seconds === 3) alertSound.play().catch(e => console.log("Audio blocked:", e));
                } else {
                    tickSound.play().catch(e => console.log("Audio blocked:", e));
                }
                
                seconds--;
                
                if (seconds >= 0) {
                    setTimeout(updateCountdown, 1000);
                } else {
                    hideNotification();
                }
            }
            
            // Auto-hide after 10 seconds (fallback)
            notificationTimeout = setTimeout(() => {
                hideNotification();
            }, 10000);
        }

        // Hide notification and reset form
        function hideNotification() {
            const notification = document.getElementById("responseNotification");
            notification.style.display = "none";
            resetForm();
        }

        // Reset the form
        function resetForm() {
            document.getElementById("reportForm").reset();
            document.getElementById("coordinates").textContent = "Lat/Lng: Not selected";
            if (marker) {
                marker.setMap(null);
                marker = null;
            }
        }

        // Form submission
        document.getElementById("reportForm").addEventListener("submit", (e) => {
            e.preventDefault();
            
            const disasterType = document.getElementById("disasterType").value;
            const location = document.getElementById("location").value;
            const coordinates = document.getElementById("coordinates").textContent;
            const description = document.getElementById("description").value;
            
            // Get emergency response details
            const response = emergencyTeams[disasterType] || emergencyTeams.Other;
            
            // Create response content
            const responseContent = `
                <h3>üöë Emergency Response Activated</h3>
                <p><strong>Disaster:</strong> ${disasterType}</p>
                <p><strong>Location:</strong> ${location}</p>
                <p><strong>Coordinates:</strong> ${coordinates.replace("Lat/Lng: ", "")}</p>
                <p><strong>Teams Dispatched:</strong></p>
                <ul>
                    ${response.teams.map(team => `<li>${team}</li>`).join("")}
                </ul>
                <p><strong>ETA:</strong> ${response.eta}</p>
                <p><em>Help is on the way! Stay safe.</em></p>
            `;
            
            // Show the notification
            showNotification(responseContent);
            
            // In a real app, you would send this data to a server here
            console.log("Disaster reported:", { 
                disasterType, 
                location, 
                coordinates,
                description 
            });
        });

        // Close notification when X is clicked
        document.querySelector(".close-notification").addEventListener("click", hideNotification);

        // Load Google Maps
        function loadMap() {
            const script = document.createElement("script");
            script.src = `https://maps.googleapis.com/maps/api/js?key=AIzaSyDPzfzPe9p8REyDmNi7dVu6jvflrDzAeUA&libraries=places&callback=initMap`;
            script.async = true;
            script.defer = true;
            document.head.appendChild(script);
        }
        
        loadMap();
    </script>
</body>
</html>